<!DOCTYPE html>
<html class="h-full">
<head>
    <meta charset="UTF-8">
    <title>Opti AI | Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bg-fixed-gif { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; object-fit: cover; filter: brightness(0.2); }
        .terminal-window {
            background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(25px);
            border: 1px solid rgba(34, 211, 238, 0.2); width: 450px; height: 600px;
        }
    </style>
</head>
<body class="bg-black text-white flex items-center justify-center h-screen overflow-hidden">

    <img src="YOUR_GIF_URL.gif" class="bg-fixed-gif">

    <div class="terminal-window rounded-3xl shadow-2xl flex flex-col relative">
        
        <div class="p-5 border-b border-white/5 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 rounded-full bg-cyan-500 animate-pulse"></div>
                <span class="text-[10px] font-black uppercase tracking-[0.3em] text-cyan-500">Opti Neural Link</span>
            </div>
            <a href="/logout" class="group flex items-center gap-2">
                <span class="text-[8px] opacity-0 group-hover:opacity-100 transition-all uppercase font-bold text-red-500">Terminate</span>
                <div class="w-6 h-6 rounded-full border border-red-500/30 flex items-center justify-center hover:bg-red-500 transition-all">
                    <span class="text-[10px] text-white">âœ•</span>
                </div>
            </a>
        </div>

        <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-6 text-sm leading-relaxed scrollbar-hide">
            <div class="text-cyan-400 font-mono">{{ initial_msg }}</div>
        </div>

        <form id="chat-form" class="p-6 border-t border-white/5 flex gap-3">
            <input type="text" id="user-input" placeholder="Type command..." 
                class="flex-1 bg-transparent text-sm font-mono outline-none border-b border-white/10 focus:border-cyan-500 transition-all">
            <button type="submit" class="text-cyan-500 font-black text-[10px] uppercase tracking-widest px-4">Send</button>
        </form>
    </div>

    <script>
        const form = document.getElementById('chat-form');
        const box = document.getElementById('chat-box');

        form.onsubmit = async (e) => {
            e.preventDefault();
            const input = document.getElementById('user-input');
            const msg = input.value;
            input.value = '';

            box.innerHTML += `<div class="text-gray-500 font-mono">> ${msg}</div>`;
            
            const response = await fetch('/ask', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `query=${encodeURIComponent(msg)}`
            });
            const data = await response.text();
            box.innerHTML += `<div class="text-cyan-400 font-mono">${data}</div>`;
            box.scrollTop = box.scrollHeight;
        };
    </script>
</body>
</html>
